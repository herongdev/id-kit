{"version":3,"sources":["pages/index/index.uvue","App.uvue"],"sourcesContent":["<template>\r\n\t<view class=\"wrapper\">\r\n\t\t<view class=\"actions\">\r\n\t\t\t<button type=\"primary\" @click=\"onConsent\" :disabled=\"consent || loading\">{{ consent ? '已同意' : '同意并初始化' }}</button>\r\n\t\t\t<button @click=\"onGetBest\" :disabled=\"!consent || loading\">获取最佳ID</button>\r\n\t\t</view>\r\n\t\t<view class=\"result\" v-if=\"hasResult\">\r\n\t\t\t<text>来源：{{result.source}}</text>\r\n\t\t\t<text>可用：{{result.available}}</text>\r\n\t\t\t<text v-if=\"result.hash\">哈希：{{result.hash}}</text>\r\n\t\t\t<text v-if=\"result.value\">原值：{{result.value}}</text>\r\n\t\t\t<text v-if=\"result.message\">说明：{{result.message}}</text>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport { register, setSalt, getBestId } from \"@/uni_modules/id-kit\"\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tconsent: false,\r\n\t\t\t\tloading: false,\r\n\t\t\t\thasResult: false,\r\n\t\t\t\tresult: {} as UTSJSONObject\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tasync onConsent() {\r\n\t\t\t\tthis.loading = true\r\n\t\t\t\ttry {\r\n\t\t\t\t\tawait register()\r\n\t\t\t\t\tsetSalt(\"demo-salt\")\r\n\t\t\t\t\tthis.consent = true\r\n\t\t\t\t\tuni.showToast({ title: \"已同意\" })\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tuni.showToast({ title: \"初始化失败\", icon: \"none\" })\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync onGetBest() {\r\n\t\t\t\tthis.loading = true\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst r = await getBestId({ exposeRaw: false })\r\n\t\t\t\t\tthis.result = r as UTSJSONObject\r\n\t\t\t\t\tthis.hasResult = true\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tthis.result = {\r\n\t\t\t\t\t\t\"available\": false,\r\n\t\t\t\t\t\t\"source\": \"unknown\",\r\n\t\t\t\t\t\t\"message\": String(e),\r\n\t\t\t\t\t\t\"hash\": \"\",\r\n\t\t\t\t\t\t\"value\": \"\"\r\n\t\t\t\t\t} as UTSJSONObject\r\n\t\t\t\t\tthis.hasResult = true\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.wrapper {\r\n\t\tpadding: 24rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\r\n\t}\r\n\r\n\t.logo {\r\n\t\theight: 100px;\r\n\t\twidth: 100px;\r\n\t\tmargin: 100px auto 25px auto;\r\n\t}\r\n\r\n\t.title {\r\n\t\tfont-size: 18px;\r\n\t\tcolor: #8f8f94;\r\n\t\ttext-align: center;\r\n\t}\r\n</style>",null],"names":[],"mappings":";;;;;;;;;;;;;AAiBC,OAA6C,qBAAqB,CAAzD;OAAoC,qBAAqB,CAA/C;OAA0B,qBAAqB,CAAtC;+BAerB;AAdF;;eASJ,sBAAM,CAEN;;;;;;eA5BD,IAYO,QAAA,IAZD,WAAM,YAAS;YACpB,IAGO,QAAA,IAHD,WAAM,YAAS;gBACpB,IAAkH,UAAA,IAA1G,UAAK,WAAW,aAAO,KAAA,SAAS,EAAG,eAAU,KAAA,OAAO,IAAI,KAAA,OAAO,QAAK,IAAA,KAAA,OAAO;oBAAA;;oBAAA;;gBAAA,GAAA,CAAA,EAAA;oBAAA;oBAAA;iBAAA;gBACnF,IAA0E,UAAA,IAAjE,aAAO,KAAA,SAAS,EAAG,eAAQ,CAAG,KAAA,OAAO,IAAI,KAAA,OAAO,IAAE,UAAM,CAAA,EAAA;oBAAA;oBAAA;iBAAA;;uBAEvC,KAAA,SAAS;gBAApC,IAMO,QAAA,gBAND,WAAM;oBACX,IAAiC,QAAA,IAAA,EAA3B,QAAG,IAAE,KAAA,MAAM,CAAA,SAAA,GAAO,CAAA;oBACxB,IAAoC,QAAA,IAAA,EAA9B,QAAG,IAAE,KAAA,MAAM,CAAA,YAAA,GAAU,CAAA;+BACf,KAAA,MAAM,CAAA,OAAA;wBAAlB,IAAkD,QAAA,IAAA,SAAA,CAAA,GAAzB,QAAG,IAAE,KAAA,MAAM,CAAA,OAAA,GAAK,CAAA;;;;+BAC7B,KAAA,MAAM,CAAA,QAAA;wBAAlB,IAAoD,QAAA,IAAA,SAAA,CAAA,GAA1B,QAAG,IAAE,KAAA,MAAM,CAAA,QAAA,GAAM,CAAA;;;;+BAC/B,KAAA,MAAM,CAAA,UAAA;wBAAlB,IAAwD,QAAA,IAAA,SAAA,CAAA,GAA5B,QAAG,IAAE,KAAA,MAAM,CAAA,UAAA,GAAQ,CAAA;;;;;;;;;;aAU9C;aACA;aACA;aACA,QAAc;;;mBAHd,aAAS,KAAK,EACd,aAAS,KAAK,EACd,eAAW,KAAK,EAChB,YAAQ,eAAC;;aAOJ;aAAA,oBAAS,WAAA,IAAA,EAAA;QAAA,OAAA,eAAA;gBACd,IAAI,CAAC,OAAM,GAAI,IAAG;gBAClB,IAAI;oBACH,MAAM;oBACN,QAAQ;oBACR,IAAI,CAAC,OAAM,GAAI,IAAG;oBAClB,+BAAgB,QAAO;;iBACtB,OAAO,cAAG;oBACX,+BAAgB,QAAO,SAAS,OAAM;;wBAC7B;oBACT,IAAI,CAAC,OAAM,GAAI,KAAI;;SAEpB;IAAD;aACM;aAAA,oBAAS,WAAA,IAAA,EAAA;QAAA,OAAA,eAAA;gBACd,IAAI,CAAC,OAAM,GAAI,IAAG;gBAClB,IAAI;oBACH,IAAM,IAAI,MAAM,UAAU;wBAAE,IAAA,YAAW,KAAI;qBAAG;oBAC9C,IAAI,CAAC,MAAK,GAAI,EAAA,EAAA,CAAK;oBACnB,IAAI,CAAC,SAAQ,GAAI,IAAG;;iBACnB,OAAO,cAAG;oBACX,IAAI,CAAC,MAAK,GAAI;wBACb,gBAAa,KAAK;wBAClB,aAAU;wBACV,cAAW,OAAO;wBAClB,WAAQ;wBACR,YAAS;qBACV;oBACA,IAAI,CAAC,SAAQ,GAAI,IAAG;;wBACX;oBACT,IAAI,CAAC,OAAM,GAAI,KAAI;;SAErB;IAAA;;;;;;;;;;;;;;;;;;;;AAEF"}