{"version":3,"file":"pages/index/index.uvue","names":[],"sources":["pages/index/index.uvue"],"sourcesContent":["<template>\r\n\t<view class=\"wrapper\">\r\n\t\t<view class=\"actions\">\r\n\t\t\t<button type=\"primary\" @click=\"onConsent\" :disabled=\"consent || loading\">{{ consent ? '已同意' : '同意并初始化' }}</button>\r\n\t\t\t<button @click=\"onGetBest\" :disabled=\"!consent || loading\">获取最佳ID</button>\r\n\t\t</view>\r\n\t\t<view class=\"result\" v-if=\"hasResult\">\r\n\t\t\t<text>来源：{{result.source}}</text>\r\n\t\t\t<text>可用：{{result.available}}</text>\r\n\t\t\t<text v-if=\"result.hash\">哈希：{{result.hash}}</text>\r\n\t\t\t<text v-if=\"result.value\">原值：{{result.value}}</text>\r\n\t\t\t<text v-if=\"result.message\">说明：{{result.message}}</text>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport { register, setSalt, getBestId } from \"@/uni_modules/id-kit\"\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tconsent: false,\r\n\t\t\t\tloading: false,\r\n\t\t\t\thasResult: false,\r\n\t\t\t\tresult: {} as UTSJSONObject\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tasync onConsent() {\r\n\t\t\t\tthis.loading = true\r\n\t\t\t\ttry {\r\n\t\t\t\t\tawait register()\r\n\t\t\t\t\tsetSalt(\"demo-salt\")\r\n\t\t\t\t\tthis.consent = true\r\n\t\t\t\t\tuni.showToast({ title: \"已同意\" })\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tuni.showToast({ title: \"初始化失败\", icon: \"none\" })\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync onGetBest() {\r\n\t\t\t\tthis.loading = true\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst r = await getBestId({ exposeRaw: false })\r\n\t\t\t\t\tthis.result = r as UTSJSONObject\r\n\t\t\t\t\tthis.hasResult = true\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tthis.result = {\r\n\t\t\t\t\t\t\"available\": false,\r\n\t\t\t\t\t\t\"source\": \"unknown\",\r\n\t\t\t\t\t\t\"message\": String(e),\r\n\t\t\t\t\t\t\"hash\": \"\",\r\n\t\t\t\t\t\t\"value\": \"\"\r\n\t\t\t\t\t} as UTSJSONObject\r\n\t\t\t\t\tthis.hasResult = true\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.wrapper {\r\n\t\tpadding: 24rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\r\n\t}\r\n\r\n\t.logo {\r\n\t\theight: 100px;\r\n\t\twidth: 100px;\r\n\t\tmargin: 100px auto 25px auto;\r\n\t}\r\n\r\n\t.title {\r\n\t\tfont-size: 18px;\r\n\t\tcolor: #8f8f94;\r\n\t\ttext-align: center;\r\n\t}\r\n</style>"],"mappings":"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"}